<!DOCTYPE html>
<html>
  <!-- Use the Source, Luke -->
  <head>
    <title>CodeFlower Source code visualization</title>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8">
    <link type="text/css" rel="stylesheet" href="stylesheets/bootstrap.min.css"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="stylesheets/bootstrap-responsive.min.css" rel="stylesheet">
    <link href='http://fonts.googleapis.com/css?family=Rosario:400,700' rel='stylesheet' type='text/css'>
    <link type="text/css" rel="stylesheet" href="stylesheets/style.css"/>
    <style type="text/css">
circle.node {
  cursor: pointer;
  stroke: #000;
  stroke-width: .5px;
}

circle.node.directory {
  stroke: #9ecae1;
  stroke-width: 2px;
}

circle.node.collapsed {
  stroke: #555;
}

.nodetext {
  fill: #252929;
  font-weight: bold;
  text-shadow: 0 0 0.2em white;
}

line.link {
  fill: none;
  stroke: #9ecae1;
  stroke-width: 1.5px;
}
    </style>
  </head>
  <body>
    <div class="content">
      <div class="container">
        <h1>CodeFlower Source code visualization</h1>
        <form class="form-inline">
          <fieldset>
          <label>Example projects from GitHub:</label>
          <select id="project">
            <option value="data/cokl.json">cokl</option>
          </select>
          </fieldset>
        </form>
        <div id="visualization"></div>
      </div>
      <div id="jsonData">
        language,filename,blank,comment,code,"http://cloc.sourceforge.net v 1.64  T=1.37 s (51.2 files/s, 66036.3 lines/s)"
Perl,cokl/lib/BOHdb/DateConverter.pm,12,11,4457
Perl,cokl/lib/BOHdb/Saint.pm,39,103,445
Perl,cokl/lib/Config/Properties.pm,201,232,385
Perl,cokl/lib/BOHdb/Manuscripts.pm,34,96,383
Perl,cokl/lib/BOHdb/CalendarEntries.pm,26,71,334
Perl,cokl/lib/BOHdb/Saints.pm,19,43,322
Perl,cokl/lib/BOHdb/Calendar.pm,19,60,306
Perl,cokl/lib/BOHdb/Date.pm,22,58,265
CSS,cokl/html/css/bohstyle.css,44,28,217
Perl,cokl/lib/BOHdb/Manuscript.pm,26,34,209
SQL,cokl/sql/views.sql,14,16,177
Perl,cokl/lib/BOHdb/db.pm,29,21,166
Perl,cokl/cgi-bin/match_manuscript.pl,16,48,164
Perl,cokl/bin/generate_weighted.pl,23,22,144
Perl,cokl/bin/loader.pl,19,40,137
HTML,cokl/html/technology.html,10,19,132
HTML,cokl/html/css/preview.html,4,0,130
HTML,cokl/html/manuscripts_histogram.html,15,19,129
Perl,cokl/cgi-bin/stats.pl,13,13,123
Perl,cokl/lib/BOHdb/CalendarEntry.pm,15,24,120
HTML,cokl/html/db_stats.html,17,19,119
HTML,cokl/html/compare_manuscripts.html,15,21,115
Perl,cokl/bin/generate_distance_matrix.pl,13,10,109
HTML,cokl/html/index.html,13,19,103
HTML,cokl/html/list_manuscripts.html,12,19,100
HTML,cokl/html/match_manuscript.html,11,19,100
Perl,cokl/cgi-bin/compare_manuscripts.pl,14,16,97
HTML,cokl/html/about.html,13,19,94
Perl,cokl/lib/BOHdb/PermLink.pm,11,9,92
Perl,cokl/cgi-bin/lookup_saint.pl,18,20,91
CSS,cokl/html/css/colors.css,16,0,91
Perl,cokl/cgi-bin/date_detail.pl,9,22,90
Perl,cokl/cgi-bin/list_manuscripts.pl,13,17,83
Perl,cokl/lib/BOHdb/Saint/Image.pm,9,14,80
Perl,cokl/cgi-bin/color_grid.pl,8,15,67
Perl,cokl/lib/BOHdb/JSON/GoogleChart.pm,10,16,62
Javascript,cokl/html/js/local.js,9,21,60
Perl,cokl/cgi-bin/saint_detail.pl,12,15,59
Perl,cokl/cgi-bin/list_saints_by_name.pl,7,14,56
Perl,cokl/cgi-bin/insert_manuscript.pl,8,5,54
Perl,cokl/lib/BOHdb/html.pm,13,13,54
Perl,cokl/cgi-bin/list_saints_by_date.pl,6,34,53
Perl,cokl/cgi-bin/manuscript.pl,11,8,50
SQL,cokl/sql/update_structure_5.sql,9,6,49
Perl,cokl/cgi-bin/list_thumbnails.pl,6,9,46
Perl,cokl/cgi-bin/list_saints_by_date_name.pl,7,8,44
Perl,cokl/cgi-bin/insert_location.pl,10,5,42
Perl,cokl/bin/generate_short_name.pl,10,8,42
Perl,cokl/bin/generate_colors.pl,10,7,39
Perl,cokl/lib/BOHdb/toolkit.pm,8,4,38
Perl,cokl/lib/BOHdb/Date_fragments.pl,1,14,29
CSS,cokl/html/css/colors-static.css,4,0,25
SQL,cokl/sql/update_structure_7.sql,2,3,21
SQL,cokl/sql/useful.sql,6,3,21
Javascript,cokl/html/js/jquery_local.js,0,8,21
SQL,cokl/sql/update_structure_6.sql,2,3,17
RobotFramework,cokl/bin/paris_rouen.tsv,0,0,15
SQL,cokl/sql/update_structure_1.sql,6,2,13
SQL,cokl/sql/update_structure_4.sql,1,2,13
make,cokl/Makefile,3,0,12
SQL,cokl/sql/triggers.sql,2,1,9
HTML,cokl/tt/google_analytics.html,2,0,8
CSS,cokl/html/css/styles.css,1,0,7
RobotFramework,cokl/bin/three.tsv,0,0,4
SQL,cokl/sql/update_structure_3.sql,0,1,2
SQL,cokl/sql/update_structure_2.sql,0,1,2
      </div>
    </div>
    <script type="text/javascript" src="javascripts/d3/d3.js"></script>
    <script type="text/javascript" src="javascripts/d3/d3.geom.js"></script>
    <script type="text/javascript" src="javascripts/d3/d3.layout.js"></script>
    <script type="text/javascript" src="javascripts/CodeFlower.js"></script>
    <script type="text/javascript" src="javascripts/dataConverter.js"></script>
    <script type="text/javascript">
      var currentCodeFlower;
      var createCodeFlower = function(json) {
        // update the jsonData textarea
        document.getElementById('jsonData').value = JSON.stringify(json);
        // remove previous flower to save memory
        if (currentCodeFlower) currentCodeFlower.cleanup();
        // adapt layout size to the total number of elements
        var total = countElements(json);
        w = parseInt(Math.sqrt(total) * 30, 10);
        h = parseInt(Math.sqrt(total) * 30, 10);
        // create a new CodeFlower
        currentCodeFlower = new CodeFlower("#visualization", w, h).update(json);
      };

      d3.json('data.json', createCodeFlower);

      document.getElementById('project').addEventListener('change', function() {
        d3.json(this.value, createCodeFlower);
      });
      document.getElementById('jsonInput').addEventListener('submit', function(e) {
        e.preventDefault();
        document.getElementById('visualization').scrollIntoView();
        var json = JSON.parse(document.getElementById('jsonData').value);
        currentCodeFlower.update(json);
      });
      document.getElementById('jsonConverter').addEventListener('submit', function(e) {
        e.preventDefault();
        var origin = this.children[0].children[0].value;
        var data = this.children[0].children[1].value;
        var json = convertToJSON(data, origin);
        document.getElementById('visualization').scrollIntoView();
        createCodeFlower(json);
      });
    </script>
    <script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-26354577-2']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

    </script>
  </body>
</html>
